# Shared .env for Terraform + Flask (repo root)
#
# How to use:
# 1) Copy this file to .env
# 2) Fill in the "Set this now" sections
# 3) Run deploy_to_aws.sh or Terraform
# 4) After terraform apply, fill the "From terraform output" values
#
# Notes:
# - Lines must be KEY=VALUE with no spaces around '='.
# - If using an AWS IAM role/profile, you can leave AWS_ACCESS_KEY_ID and
#   AWS_SECRET_ACCESS_KEY empty.

# =============================================================================
# Step 1: AWS Credentials (local development or CI)
# =============================================================================
# Set this now (or leave empty if you use aws configure / IAM role):
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Set this now (recommended dev region for India):
AWS_REGION=ap-south-1

# =============================================================================
# Step 2: Terraform Project Settings
# =============================================================================
# Set this now:
PROJECT_NAME=seva-arogya
ENV_NAME=dev

# Set this now:
ENABLE_HTTPS=false
# If ENABLE_HTTPS=true, set an ACM certificate ARN in the same region:
CERTIFICATE_ARN=

# Container image for ECS task:
# Step A: For first terraform apply, you can leave this as nginx:latest.
# Step B: After ECR is created, replace with:
#   <account-id>.dkr.ecr.<region>.amazonaws.com/<repo>:latest
CONTAINER_IMAGE=nginx:latest

# =============================================================================
# Step 3: Database and App Secrets (Terraform creates secrets from these values)
# =============================================================================
# Set these now:
DB_NAME=sevaarogya
DB_USERNAME=sevaadmin
# Must be at least 8 characters:
DB_PASSWORD=CHANGE_ME_SECURE_PASSWORD
# Optional: leave empty to use AWS default engine version:
DB_ENGINE_VERSION=

# Generate random values (32+ chars recommended):
# Example: openssl rand -base64 32
FLASK_SECRET_KEY=CHANGE_ME_FLASK_SECRET_32_CHARS_MIN
JWT_SECRET=CHANGE_ME_JWT_SECRET_32_CHARS_MIN

# =============================================================================
# Step 4: Flask App Runtime Settings
# =============================================================================
# Set this now:
FLASK_ENV=production
LOG_LEVEL=INFO

# Comma-separated list of allowed origins:
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5000

# Local development fallback (only used if Secrets Manager is unavailable):
DATABASE_URL=postgresql://user:password@localhost:5432/seva_arogya

# Optional fallback if Secrets Manager is unavailable:
SECRET_KEY=local-dev-secret

# =============================================================================
# Step 5: Values FROM Terraform Outputs (fill after terraform apply)
# =============================================================================
# These are needed for local development and for clarity. For ECS, Terraform
# injects them automatically.
#
# Get them with:
#   terraform -chdir=seva-arogya-infra output -raw <output_name>

# Cognito
AWS_COGNITO_USER_POOL_ID=
AWS_COGNITO_CLIENT_ID=
AWS_COGNITO_CLIENT_SECRET=

# S3 buckets
S3_AUDIO_BUCKET=
S3_PDF_BUCKET=

# Secrets Manager secret names
DB_SECRET_NAME=
FLASK_SECRET_NAME=
JWT_SECRET_NAME=
